<% url_options = params_for(:action => :index, :escape => false, :search => nil) -%>
<%=
options = {:id => search_form_id,
           :class => "as_form search",
           :remote => true,
           :method => :get,
           'data-loading' => true}
form_tag url_options, options %>
  <ol class="form">
    <% active_scaffold_config.field_search.columns.each do |column| -%>
      <% next unless column.search_sql -%>
      <% name = "search[#{column.name}]" %>
      <li class="form-element">
        <dl>
          <dt>
            <label for="<%= "search_#{column.name}" %>"><%= column.label %></label>
          </dt>
        <dd>
        <%= active_scaffold_search_for(column) %>
        </dd>
      </dl>
    </li>
    <% end -%>
  </ol>
  <p class="form-footer">
    <%= submit_tag as_(:search), :class => "submit" %>
    <%= link_to as_(:reset), url_for(url_options.merge(:search => '')), :class => 'as_cancel', :remote => true %>
    <%= loading_indicator_tag(:action => :search) %>
  </p>
</form>

<script type="text/javascript">
//<![CDATA[
  Form.focusFirstElement('<%= search_form_id -%>');
//]]>
</script>
